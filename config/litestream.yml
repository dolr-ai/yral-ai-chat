# Litestream Configuration for SQLite Replication
# This file is used inside the Docker container

dbs:
  - path: /app/data/yral_chat.db
    replicas:
      - type: s3
        force-path-style: true
        bucket: ${LITESTREAM_BUCKET}
        path: postgres-1-backup/yral-ai-chat/db
        endpoint: ${LITESTREAM_ENDPOINT}
        region: ${LITESTREAM_REGION}
        access-key-id: ${LITESTREAM_ACCESS_KEY_ID}
        secret-access-key: ${LITESTREAM_SECRET_ACCESS_KEY}
        # Sync settings - tuned to reduce lock contention
        sync-interval: 1s
        # Retention settings
        retention: 30d
        retention-check-interval: 1h
        # Snapshot settings
        snapshot-interval: 1h
