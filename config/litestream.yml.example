# Litestream Configuration for Yral AI Chat
# Real-time SQLite replication to S3-compatible storage
#
# Copy this file to litestream.yml and fill in your credentials:
#   cp config/litestream.yml.example config/litestream.yml
#
# Documentation: https://litestream.io/reference/config/

# S3-compatible storage credentials
access-key-id: YOUR_ACCESS_KEY_ID
secret-access-key: YOUR_SECRET_ACCESS_KEY

dbs:
  - path: /root/yral-ai-chat/data/yral_chat.db
    replicas:
      # Primary backup to S3-compatible storage (e.g., Hetzner Object Storage)
      - type: s3
        bucket: YOUR_BUCKET_NAME
        endpoint: https://YOUR_BUCKET.hel1.your-objectstorage.com
        path: yral-ai-chat/db
        region: hel1
        # Force path-style addressing for S3-compatible storage
        force-path-style: true
        
        # Replication settings
        sync-interval: 1s          # Sync WAL changes every second
        snapshot-interval: 1h      # Full snapshot every hour
        
        # Retention settings
        retention: 168h            # Keep 7 days of WAL files
        retention-check-interval: 1h

