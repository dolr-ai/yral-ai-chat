# Yral AI Chat API - Environment Configuration
# Copy this file to .env and fill in the values

# ===========================================
# Application Settings
# ===========================================
APP_NAME=Yral AI Chat API
APP_VERSION=1.0.0
ENVIRONMENT=production
DEBUG=False
HOST=0.0.0.0
PORT=8000

# ===========================================
# Database (SQLite with Litestream)
# ===========================================
DATABASE_PATH=data/yral_chat.db

# ===========================================
# JWT Authentication
# ===========================================
# Generate a strong secret: openssl rand -base64 64
JWT_SECRET_KEY=your-super-secret-jwt-key-change-this-in-production
JWT_ALGORITHM=HS256
JWT_ISSUER=yral_auth

# ===========================================
# Google Gemini API
# ===========================================
GEMINI_API_KEY=your-gemini-api-key-here
GEMINI_MODEL=gemini-2.5-flash
GEMINI_MAX_TOKENS=2048
GEMINI_TEMPERATURE=0.7

# ===========================================
# Media Storage
# ===========================================
MAX_IMAGE_SIZE_MB=10
MAX_AUDIO_SIZE_MB=20
MAX_AUDIO_DURATION_SECONDS=300

# ===========================================
# S3 Media Upload (Required)
# Using Storj (S3-compatible)
# ===========================================
# Get S3-compatible credentials from Storj console: Access Keys section
AWS_ACCESS_KEY_ID=your-storj-access-key-id
AWS_SECRET_ACCESS_KEY=your-storj-secret-access-key
AWS_S3_BUCKET=yral-ai-chat
# Storj region (us1 for US, eu1 for EU, ap1 for AP)
AWS_REGION=us1
# Storj S3-compatible gateway endpoint
# US: https://gateway.storjshare.io
# EU: https://gateway.eu1.storjshare.io
# AP: https://gateway.ap1.storjshare.io
S3_ENDPOINT_URL=https://gateway.storjshare.io
# Public URL base for backward compatibility (presigned URLs are used for access)
# Format: https://gateway.storjshare.io/{bucket}
S3_PUBLIC_URL_BASE=https://gateway.storjshare.io/yral-ai-chat

# Expiration (in seconds) for generated presigned URLs
# Typical values: 300 (5 minutes), 900 (15 minutes), 3600 (1 hour)
S3_URL_EXPIRES_SECONDS=3600

# ===========================================
# Whisper API (Optional - for audio transcription)
# ===========================================
USE_WHISPER=false
WHISPER_API_KEY=

# ===========================================
# CORS Configuration
# ===========================================
CORS_ORIGINS=https://chat.yral.com,https://www.chat.yral.com
CORS_ALLOW_CREDENTIALS=true

# ===========================================
# Rate Limiting
# ===========================================
# Conservative defaults (300/min = 5/sec, 5000/hour)
# Adjust based on your infrastructure capacity:
# - Database connection pool size (default: 5, max: 20)
# - SQLite concurrency limits
# - Gemini API rate limits and costs
# - Available memory for rate limiter buckets
# Maximum safe values: 10000/min, 100000/hour (use with caution)
RATE_LIMIT_PER_MINUTE=300
RATE_LIMIT_PER_HOUR=5000

# ===========================================
# Logging
# ===========================================
LOG_LEVEL=INFO
LOG_FORMAT=json

# ===========================================
# Sentry Error Tracking & Performance Monitoring
# ===========================================
# Sentry DSN (Data Source Name) URL from your Sentry project settings
# Format: https://<key>@apm.yral.com/<project_id>
# To get your DSN:
# 1. Go to your Sentry project at apm.yral.com
# 2. Navigate to Settings > Client Keys (DSN)
# 3. Copy the DSN URL
# Leave empty to disable Sentry (useful for local development)
SENTRY_DSN=
# Performance monitoring sample rate (0.0 to 1.0)
# 1.0 = 100% of requests tracked (recommended for production)
# 0.1 = 10% of requests tracked (recommended for development)
SENTRY_TRACES_SAMPLE_RATE=1.0
# Profiling sample rate (0.0 to 1.0)
# 0.0 = profiling disabled (default)
# Only enable if needed for performance debugging
SENTRY_PROFILES_SAMPLE_RATE=0.0

# ===========================================
# Litestream Configuration
# S3-compatible storage for SQLite replication
# ===========================================
LITESTREAM_ACCESS_KEY_ID=your-litestream-access-key-id
LITESTREAM_SECRET_ACCESS_KEY=your-litestream-secret-access-key
LITESTREAM_BUCKET=postgres-1-backup
LITESTREAM_ENDPOINT=https://postgres-1-backup.hel1.your-objectstorage.com
LITESTREAM_REGION=hel1

